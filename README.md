# SmartEnergyMeter
Final Year Project

Single setup system to track complete power consumption. The system we propose allows real-time power monitoring and insight suggestions that help reduce power loads and electricity bills.
The system consists of 4 units:
- the hardware module which connects to an existing electrical distribution board
- Cloud data storage and hosted ML pipelines
- Real-time data and insight report tool for end users
- Front End Flutter 2 PWA/App

We monitor power signatures and loads in real time to analyse, report and ascertain expected device loads and measures to reduce them. Our system allows:
- End users to have active control over their power usage with suggestions on how to reduce them
- Electricity providers to have active access to real time consumption data and trends based on localities

## Application and use-cases:
- Geo-power distribution mapping for Electricity boards
- Outages monitoring for quick turnaround time
- Analytics to reduce carbon footprint
- Identify power leakages
- Variable rate tariff balancing

### Usecase

Here we came across a good usecase scenario for out project where a user can be notified about an impending overload.

The user has a window of opportunity to turn off appliances that are consuming too much power. The circuit breaker trips or the fuse burns out.

![FuseBurnout](/Images/burntoutfuse.jpg =300x)

The dashboard shows that we have crossed the limit for this household.

![Overload](/Images/overload.png)


# Google Sustainability Challenge
Q.  United Nations' Sustainable Development Goals (SDGs) being worked on
A.  Goal 9: Industry, Innovation, & Infrastructure
    Goal 11: Sustainable Cities
    Goal 12: Responsible Consumption & Production
    Goal 13: Climate Action
    
Q.  Products/Platforms utilized in your solution
A.  Flutter
    Google Cloud Platform
    TensorFlow / Machine Learning / AI
    Progressive Web Apps
    
Q.  Describe how you are using technology to solve these SDGs and your inspiration
A.  Industry, Innovation, and Infrastructure - The use of affordable and accurate electricity
    measurement sensors for small scale industries to households (Where the adoption rate of
    cutting edge technology is low) to make people aware of their power utilization by giving
    them easy to understand insights. Having all this data on an InfluxDB Cloud instance
    running on GCP, with a Flutter 2 PWA/App is tightly integrated infrastructure.
    Sustainable cities and communities - Reducing carbon footprint generated by the
    aforementioned industries and households can a be a key factor in yearly reviews. The
    generated insights can be used by governments to sustainably shift towards renewable
    resources of energy by implementation of regulations that do not hurt all parties involved.
    Responsible Consumption and Production - By providing end users with actionable intel, the
    consumers can actively make changes to their habits, to support their power demand.
    Climate Action - The world is continually increasing its energy demands, with global power
    loads predicted to be around 30,000 terawatt hours in 2021. It is estimated that over 40% of
    electricity generated is wasted due to bad energy habits, old appliances and a lack of energy
    awareness. This is primarily due to how end users have no clear insights into their power
    usage. With such actionable insights, we can provide end users with a no-modifications
    needed system that plugs into their power system and monitors their power utilization and
    loads. Thus, users can identify potential power leaks, such as faulty appliances, always on
    devices and a granular view on their power use on a per appliance basis.
    Inspiration - We had a personal power monitoring tool supplied by a solar panel company
    that had installed a unit at our place. This tool had inaccurate readings, we then retrofitted it
    to enhance its capabilities. This got us thinking at how we could extend this to powerlines,
    as monitoring power usages allowed us to schedule loads better. We found out that there
    was no such vendor in India for general consumers, and no international vendor that could
    monitor both powerline and solar power utilization with a single unit which was the basis for
    our solution. After our due diligence on the types of powerlines (Split phases in the USA,
    Three phases and single phase systems in Asia and the different Voltages/Frequencies
    across regions) in use around, we devised a universal hardware solution to cater to our
    analytical needs.
    
Q.  How does your solution address the challenge you are looking to solve for
A.  From the data collected at each source, we perform analytics to notify the user of their
    consumption trends, carbon footprint an make users aware of their usage patterns.
    Our solution allows users to actively track their power usage and identify individual power
    draw based on their power signatures. This allows users to understand their power
    consumption and identify how they use their power. This leads to monetary savings, which
    incentives users to reduce their power consumption while on a global scale, leads to a
    cleaner, greener and better environment for us all. This tool gives us the power to track our
    energy footprint on a granular level, which lets us take small corrective measures that
    reduce their energy payment while also making our planet greener, one Watt at a time
    
Q.  What do you see as the future / next steps for your project? How will you expand your solution to reach a larger audience?
A.  Geo-Power distribution mapping for Electricity boards
    Outages monitoring for quick turnaround time
    Analytics to reduce carbon footprint
    Identify power leakages
    Variable rate tariff balancing
    By tying up with power distribution boards, we can expand our solution to reach a larger audience
    
Q.  Walk us through the steps you took to test your solution. Can you provide three specific feedback points you received from users that tested out your solution?
A.  Steps taken to test our solution: [Sample Size - 4 users, with hardware modules supplied by
    us with cost covered]
    Deployed IoT Modules at user's home, placed right after the mains electricity meter given by
    the electricity board. Made sure the respective connectors for posting datapoints on the
    cloud database, through the pipeline were functioning. The data on InfluxCloud DB is then
    imported to an environment [Google AI Notebooks / Jupyter Notebooks] to perform
    analytics.
    Daemon Services Test Case:
    In an effort to monitor usage patterns and anomalies in daily power consumption of users, a
    basic script was set up to notice any deviations. This led to some interesting discoveries
    and exploratory analysis, which is explained in the next response for outcome.
    Feedback from Users:
    - DIY / Easy deployment of IoT Module and sensor
    - Streamline dataflow (Automation - Intimation from us should be minimized)
    - Make Hardware modules robust and up to local regulations(Package it - No wires dangling
    about)
    - More insights and what they mean
    - Downloadable format for data sharing
    - Mobile application
    - Unstable sensor (random shutdowns / restarts)

Q.  Please share the outcome of your testing strategy. What are three specific things
    you implemented and improved for your solution based on the feedback from
    users?
A.  From our previous response, out script was able to notify the user when there was an
    abnormal current draw that was the result of having many high load appliances turned on at
    the same time. Even though the user was notified, their complacent actions led to the main
    fuse melting. This outcome instilled a level of confidence in our project.
    Improvements from user feedback:
    - Electrical Phase wise deployment of sensors.
    - Heat Shrink Tubing, addition of a dedicated power supply for the module and coherent
    packing of module into a mountable DIN rail system.
    - Reduced polling rate to stabilize the connection.

Q.  Describe the architecture that your team chose for your solution. What are the
    high-level components of your architecture? What is the responsibility of each
    component? Which specific products and platforms did you choose to
implement these components?
A.  Hardware Stack:
    ESP32 - Data Collections and Push to Cloud
    PZEM004T - Sensor to measure electricity parameters [Voltage, Current, Power, Energy,
    Frequency, and PowerFactor]
    PZEM016 - RS 485 based Sensor
    Backend - Cloud Stack:
    Google Cloud Platform
    InfluxDB Cloud - TimeSeries Database
    Analytics Engine:
    Python
    Jupyter Notebooks
    numpy
    matplotlib.pyplot
    statsmodels.api
    seaborn
    Frontend:
    Flutter 2

Q.  Highlight one challenge you faced while building your code, including detail on
how you addressed the issue and the technical decisions and implementations
you had to make.
A.  Limited Hardware Serial ports on ESP32 for three phase design. Exposing the hidden serial
    port on ESP32 proved to be a challenge as several hours were spent in figuring out other
    options. By forcing the header files of Hardware serial to reference an acceptable GPIO pin,
    we were able to accommodate 3 sensors on 3 hardware ports. The other option involved
    soldering an SMD resistor on the other 2 sensors to change the address of the sensor, so
    soldering an SMD resistor on the other 2 sensors to change the address of the sensor, so
    that multiple readings could be taken from the same hardware port. RS485 to TTL converter
    was used in the case of PZEM016, as the modbus protocol called for checking registers,
    clearing them and populating values into them.

# Members
- Akash Murthy
- Divya Sathya
- Siva Surya Babu
- Syed Irfan Ahmed

# Arduino Test
![TungstenBulb](/Images/Tungsten_test.jpg =300x)
![LEDbulb](/Images/LED_test.jpg =300x)
